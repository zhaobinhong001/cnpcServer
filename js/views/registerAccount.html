<section class="content">

    <header class="top-head container-fluid">
        <button type="button" class="navbar-toggle pull-left">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <nav class=" navbar-default hidden-xs" role="navigation">
        </nav>
    </header>


    <div class="warper container-fluid">

        <div class="page-header">
            <h1>用户注册</h1>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">注册表单</div>

            <div class="panel-body">
                <div ng-if="status && status != 200">
                    <div class="alert alert-danger" role="alert">
                        <a href="#" class="alert-link">{{error}}</a>
                    </div>
                </div>
                <form name="userForm" ng-submit="submitForm(userForm.$valid)" novalidate>
                    <div class="input-group">
                                <span class="input-group-btn">
                                <button class="btn btn-info" type="button">姓名</button>
                                </span>

                        <input class="form-control" type="text" name="name" ng-model="name" ng-minlength="2"
                               ng-maxlength="8" required placeholder="请输入姓名">

                    </div>
                    <span ng-show="userForm.name.$touched && userForm.name.$invalid">姓名为必添项.</span>
                    <hr class="xs">

                    <div class="input-group">
                                <span class="input-group-btn">
                                <button class="btn btn-success" type="button">身份证号</button>
                                </span>
                        <input class="form-control" type="text" value="" ng-model="number" ng-minlength="18"
                               ng-maxlength="18" required placeholder="请输入身份证号">
                    </div>
                    <span ng-show="userForm.number.$touched && userForm.number.$invalid">身份证号必添项.</span>
                    <hr class="xs">

                    <div class="input-group">
                                <span class="input-group-btn">
                                <button class="btn btn-info" type="button">手机号</button>
                                </span>
                        <input class="form-control" type="text" value="" ng-model="phone" ng-minlength="11"
                               ng-maxlength="11" required placeholder="请输入手机号">
                    </div>


                    <span ng-show="userForm.phone.$touched && userForm.phone.$invalid">手机号必添项.</span>


                    <hr class="xs">

                    <div class="input-group">
                                <span class="input-group-btn">
                                <button class="btn btn-success" type="button">社保号</button>
                                </span>
                        <input class="form-control" type="text" value="" ng-model="pensionNo" required
                               placeholder="请输入社保号">
                    </div>

                    <span ng-show="userForm.phone.$touched && userForm.phone.$invalid">社保号必添项.</span>

                    <hr class="xs">

                    <div class="input-group">
                                <span class="input-group-btn">
                                <label class="btn control-label">个人头像</label>
                                </span>


                        <table>
                            <tbody>
                            <tr>
                                <td>
                                    <div id="w3camera">
                                    </div>
                                </td>
                                <td valign="top">&nbsp;&nbsp;
                                    <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQwIiBoZWlnaHQ9IjE0MCIgdmlld0JveD0iMCAwIDE0MCAxNDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzE0MHgxNDAKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xNTVjOTU1MTEzNyB0ZXh0IHsgZmlsbDojQUFBQUFBO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjEwcHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE1NWM5NTUxMTM3Ij48cmVjdCB3aWR0aD0iMTQwIiBoZWlnaHQ9IjE0MCIgZmlsbD0iI0VFRUVFRSIvPjxnPjx0ZXh0IHg9IjQ0LjA1NDY4NzUiIHk9Ijc0LjUiPjE0MHgxNDA8L3RleHQ+PC9nPjwvZz48L3N2Zz4="
                                         id="Uface" alt="280pxX280px" style="width: 200px; height:160px;"
                                         class="img-thumbnail">
                                    <input type="hidden" ng-model="fileId" id="fileId" value="" name="fileId">
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <hr class="xs">
                    <div class="row" style="padding: 20px 0">
                        <div class="col-lg-4 col-lg-offset-4">
                            <button class="btn btn-primary btn-block" ng-disabled="userForm.$invalid" type="submit">提交
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Button trigger modal
    <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
        Launch demo modal
    </button>
 -->
    <!-- Modal -->
    <div class="modal fade" id="myModal" ng-model="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">提示</h4>
                </div>
                <div class="modal-body">
                    用户({{name}})注册成功!
                    <div class="alert alert-success" maxlength="10" role="alert">激活码:{{activeCode}} 初始证书密码:{{pwd}}</div>
                    请记录
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="btnDismiss()">关闭
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!--<script type="text/javascript">-->
    <!--$('#myModal').modal()-->
    <!--</script>-->


</section>


<script src="js/swfobject.js" type="text/javascript"></script>
<script type="text/javascript">
    var flashvars = {
        cgi_url: "/api/upload_file",
        codec: "JPEG",
        quality: 100
    };
    var params = {
        menu: "false",
        scale: "noScale",
        allowFullscreen: "true",
        allowScriptAccess: "always",
        bgcolor: "#FFFFFF",
    };
    var attributes = {
        id: "w3camera"
    };
    swfobject.embedSWF("swf/w3camera.swf", "w3camera", "400", "360", "10.0.0", "swf/expressInstall.swf", flashvars, params, attributes);

    // w3camera
    function callback_w3camera(results) {
        var obj = JSON.parse(results);
        //	alert(obj.id);

        $("#Uface").attr("src",obj.url);
        $("input#fileId").val(obj.id);
        // {{fileId=obj.id}}


//        var _img = document.createElement("img");
//        _img.src = results;
//        document.getElementById("res").innerText = results;
//
//        document.getElementById("res").appendChild(_img);
    }
</script>